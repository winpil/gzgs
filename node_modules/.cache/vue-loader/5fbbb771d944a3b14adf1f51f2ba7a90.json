{"remainingRequest":"D:\\hzgs-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\hzgs-admin\\src\\views\\pages\\import\\import.vue?vue&type=style&index=0&id=643efa1a&lang=less&scoped=true&","dependencies":[{"path":"D:\\hzgs-admin\\src\\views\\pages\\import\\import.vue","mtime":1620299676716},{"path":"D:\\hzgs-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\hzgs-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\hzgs-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\hzgs-admin\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\hzgs-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\hzgs-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZm9ybUJhciB7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RmZTZlYzsKICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICBtYXJnaW46IDIwcHggMjBweCAwIDIwcHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwoKICAgIC5maWx0ZXItaXRlbSB7CiAgICAgIG1hcmdpbi1ib3R0b206IDA7CiAgICB9CgogICAgLmZvcm0taGVhZCB7CiAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgbWFyZ2luLWxlZnQ6IDZweDsKICAgICAgY29sb3I6ICM2NjY7CiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIH0KICB9Cgo="},{"version":3,"sources":["import.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmOA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"import.vue","sourceRoot":"src/views/pages/import","sourcesContent":["<template>\n    <div>\n        <div class=\"filter-container formBar\">\n            <div class=\"form-head\">\n                数据导入\n            </div>\n            <!-- <el-button class=\"filter-item\" style=\"float: right;\" type=\"primary\" icon=\"el-icon-document-checked\" @click=\"handleAdd\">\n                添加备份\n            </el-button>\n            <el-button class=\"filter-item\" style=\"float: right;margin-right: 10px;background: #e67f00;border: 1px solid #e67f00;\" type=\"primary\" icon=\"el-icon-document-checked\" @click=\"handleSubmit\">\n                立即备份\n            </el-button> -->\n        </div>\n        <div style=\"padding-left: 25px;padding-right: 25px;overflow: auto;margin-top: 10px;\">\n            <div class=\"dataitem\" style=\"height: 80px;border: 1px solid #c1c0c0;border-radius: 7px;padding: 30px 40px 10px 40px;color: #666;font-size: 16px;position: relative;margin-bottom: 20px;\" v-for=\"(item, index) in importList\" :key=\"item.id\">\n                <div style=\"margin-right: 15px;width: 120px;display: inline-block;\">{{item.name}}:</div>\n                <input type=\"file\" style=\"width: 80%;\" @change=\"updateFile($event, index)\" accept=\"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\">\n                <el-button type=\"primary\" @click=\"insertTotal(item.id, index)\" style=\"position: absolute;right: 30px;top: 25px;\">确 定</el-button>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { insertArea } from '@/api/area/area.js';\nimport { insertSmt, insertFields, insertNodes, insertGt } from '@/api/device/device.js';\nimport { insertZones } from '@/api/line/line.js'\nimport { insertEvent } from '@/api/alarm/alarm.js'\nimport { param2Obj } from '../../../utils';\nexport default {\n    data() {\n        return {\n            importList: [\n                {\n                    id: 1,\n                    name: '区域信息导入',\n                    file: {}\n                },\n                {\n                    id: 2,\n                    name: '事件信息导入',\n                    file: {}\n                },\n                {\n                    id: 3,\n                    name: '防区信息导入',\n                    file: {}\n                },\n                {\n                    id: 4,\n                    name: '节点信息导入',\n                    file: {}\n                },\n                {\n                    id: 5,\n                    name: 'SMT信息导入',\n                    file: {}\n                },\n                {\n                    id: 6,\n                    name: 'GT信息导入',\n                    file: {}\n                },\n                {\n                    id: 7,\n                    name: '线路信息导入',\n                    file: {}\n                },\n            ]\n        }\n    },\n    methods: {\n        updateFile(e, index) {\n            let file = e.target.files[0];\n            this.importList[index].file = new FormData(); //创建form对象\n            this.importList[index].file.append('excel_file',file);//通过append向form对象添加数据\n            console.log(this.importList[index].file.get('excel_file'));\n        },\n\n        insertTotal(id, index) {\n            switch (id) {\n                case 1:\n                    if(!this.beforeCommit(this.importList[index].file)) return\n                    this.insertArea(this.importList[index].file)\n                    break;\n\n                case 2:\n                    if(!this.beforeCommit(this.importList[index].file)) return\n                    this.insertEvent(this.importList[index].file)\n                    break;\n\n                case 3:\n                    if(!this.beforeCommit(this.importList[index].file)) return\n                    this.insertFields(this.importList[index].file)\n                    break;\n\n                case 4:\n                    if(!this.beforeCommit(this.importList[index].file)) return\n                    this.insertNodes(this.importList[index].file)\n                    break;\n\n                case 5:\n                    if(!this.beforeCommit(this.importList[index].file)) return\n                    this.insertSmt(this.importList[index].file)\n                    break;\n\n                case 6:\n                    if(!this.beforeCommit(this.importList[index].file)) return\n                    this.insertGt(this.importList[index].file)\n                    break;\n\n                case 7:\n                    if(!this.beforeCommit(this.importList[index].file)) return\n                    this.insertZones(this.importList[index].file)\n                    break;\n            \n                default:\n                    break;\n            }\n        },\n\n        beforeCommit(param) {\n            // console.log(typeof param.get == 'undefined')\n            if (typeof param.get == 'undefined') {\n                this.$message({ type: 'warning', message: '请选择导入文件！' })\n                return false\n            }\n            return true\n        },\n        \n        insertArea(param) {\n            insertArea(param).then(res => {\n                if (res.retcode == 200) {\n                this.$message({ type: 'success', message: '数据导入成功！' })\n                setTimeout(() => {\n                    this.dialogVisible = false\n                }, 500);\n                } else {\n                this.$message({ type: 'warning', message: `数据导入失败！${res.status}` })\n                }\n            })\n        },\n\n        insertSmt(param) {\n            insertSmt(param).then(res => {\n                if (res.retcode == 200) {\n                this.$message({ type: 'success', message: '设备导入成功！' })\n                setTimeout(() => {\n                    this.dialogVisible = false\n                }, 500);\n                } else {\n                this.$message({ type: 'warning', message: `设备导入失败！${res.status}` })\n                }\n            })\n        },\n\n        insertFields(param) {\n            insertFields(param).then(res => {\n                if (res.retcode == 200) {\n                this.$message({ type: 'success', message: '防区导入成功！' })\n                setTimeout(() => {\n                    this.dialogVisible = false\n                }, 500);\n                } else {\n                this.$message({ type: 'warning', message: `防区导入失败！${res.status}` })\n                }\n            })\n        },\n\n        insertNodes(param) {\n            insertNodes(param).then(res => {\n                if (res.retcode == 200) {\n                this.$message({ type: 'success', message: '节点导入成功！' })\n                setTimeout(() => {\n                    this.dialogVisible = false\n                }, 500);\n                } else {\n                this.$message({ type: 'warning', message: `节点导入失败！${res.status}` })\n                }\n            })\n        },\n\n        insertGt(param) {\n            insertGt(param).then(res => {\n                if (res.retcode == 200) {\n                this.$message({ type: 'success', message: '数据导入成功！' })\n                setTimeout(() => {\n                    this.dialogVisible = false\n                }, 500);\n                } else {\n                this.$message({ type: 'warning', message: `数据导入失败！${res.status}` })\n                }\n            })\n        },\n\n        insertZones(param) {\n            insertZones(param).then(res => {\n                if (res.retcode == 200) {\n                this.$message({ type: 'success', message: '数据导入成功！' })\n                setTimeout(() => {\n                    this.dialogVisible = false\n                }, 500);\n                } else {\n                this.$message({ type: 'warning', message: `数据导入失败！${res.status}` })\n                }\n            })\n        },\n\n        insertEvent(param) {\n            insertEvent(param).then(res => {\n                if (res.retcode == 200) {\n                this.$message({ type: 'success', message: '数据导入成功！' })\n                setTimeout(() => {\n                    this.dialogVisible = false\n                }, 500);\n                } else {\n                this.$message({ type: 'warning', message: `数据导入失败！${res.status}` })\n                }\n            })\n        },\n\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n.formBar {\n    border-bottom: 1px solid #dfe6ec;\n    margin-top: 20px;\n    margin: 20px 20px 0 20px;\n    overflow: hidden;\n\n    .filter-item {\n      margin-bottom: 0;\n    }\n\n    .form-head {\n      font-size: 20px;\n      margin-top: 10px;\n      margin-left: 6px;\n      color: #666;\n      display: inline-block;\n    }\n  }\n\n</style>"]}]}