{"remainingRequest":"D:\\hzgs-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\hzgs-admin\\src\\views\\pages\\devices\\node.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\hzgs-admin\\src\\views\\pages\\devices\\node.vue","mtime":1620299676881},{"path":"D:\\hzgs-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\hzgs-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\hzgs-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\hzgs-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNyZWF0ZUZpZWxkLCB1cGRhdGVGaWVsZCB9IGZyb20gJ0AvYXBpL2RldmljZS9kZXZpY2UuanMnCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbm9kZUZvcm06IHsKICAgICAgICAgICAgICAgIG9yZGVyOiAnJywKICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogJycsCiAgICAgICAgICAgICAgICBsYXRpdHVkZTogJycsCiAgICAgICAgICAgICAgICBzdGF0dXM6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG5vZGVSdWxlczogewogICAgICAgICAgICAgICAgb3JkZXI6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6IqC54K56aG65bqPJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpee7j+W6picsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpee6rOW6picsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFnZVR5cGU6IHsKICAgICAgICAgICAgICAgIGxpc3Q6IDAsCiAgICAgICAgICAgICAgICBhZGQ6IDEsCiAgICAgICAgICAgICAgICBlZGl0OiAyLAogICAgICAgICAgICAgICAgZGV0YWlsOiAzCiAgICAgICAgICAgIH0sCiAgICAgICAgfQogICAgfSwKICAgIHByb3BzOiB7CiAgICAgICAgc2hvd0ZsYWc6IHsKICAgICAgICAgICAgdHlwZTogTnVtYmVyCiAgICAgICAgfSwKICAgICAgICBibG9jazogewogICAgICAgICAgICB0eXBlOiBPYmplY3QKICAgICAgICB9LAogICAgICAgIHNtdGlkOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZwogICAgICAgIH0sCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGhhbmRsZURlbCgpIHsKICAgICAgICAgICAgbGV0IHZhbCA9IHRoaXMubm9kZUZvcm0uaWQgfHwgJycKICAgICAgICAgICAgdGhpcy4kY29uZmlybSgn6IqC54K55Yig6Zmk5ZCO5peg5rOV5oGi5aSN77yM5piv5ZCm57un57ut5Yig6Zmk77yfJywgJ+aPkOekuicsIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn5o+Q5LqkJywKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZGVsJywgdmFsKQogICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVDb25maXJtKCkgewogICAgICAgICAgICBsZXQgdmFsaWRUZW1wCiAgICAgICAgICAgIHRoaXMuJHJlZnNbJ25vZGVGb3JtJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgIHZhbGlkVGVtcCA9IHRydWUKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YWxpZFRlbXAgPSBmYWxzZQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKCF2YWxpZFRlbXApIHJldHVybiAKICAgICAgICAgICAgdGhpcy5ub2RlRm9ybS5zdGF0dXMgPSAxCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldE5vZGUnLCB0aGlzLm5vZGVGb3JtKQogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVVcGRhdGUoKSB7CiAgICAgICAgICAgIHRoaXMubm9kZUZvcm0uc3RhdHVzID0gMAogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgfSwKICAgICAgICBhZGRGaWVsZCgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2FkZCcsIHRoaXMuc210aWQpCiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7fQogICAgICAgICAgICBwYXJhbXMuaW50ZXJ2YWxfc3RhcnQgPSB0aGlzLm5vZGVGb3JtLmludGVydmFsX3N0YXJ0CiAgICAgICAgICAgIHBhcmFtcy5pbnRlcnZhbF9lbmQgPSB0aGlzLm5vZGVGb3JtLmludGVydmFsX2VuZAogICAgICAgICAgICBwYXJhbXMuem9uZSA9IHRoaXMubm9kZUZvcm0uem9uZQogICAgICAgICAgICBwYXJhbXMuc210X2lkID0gdGhpcy5zbXRpZAogICAgICAgICAgICBwYXJhbXMuc210X2ZpZWxkID0gdGhpcy5ub2RlRm9ybS5zbXRfZmllbGQKICAgICAgICAgICAgY3JlYXRlRmllbGQocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzLnJldGNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAnc3VjY2VzcycsIG1lc3NhZ2U6ICfmlrDlop7pmLLljLrmiJDlip/vvIEnIH0pCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlRm9ybS5zdGF0dXMgPSAxCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZ2V0QmxvY2snLCB0aGlzLm5vZGVGb3JtKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgICAgICAgICAgIH0gZWxzZXsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsgdHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn5paw5aKe6Ziy5Yy65aSx6LSl77yM6K+36L6T5YWl6Ziy5Yy65Y+35ZSv5LiA77yBJyB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgdXBkYXRlRmllbGQoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGUnLCB0aGlzLnNtdGlkKQogICAgICAgICAgICBsZXQgcGFyYW1zID0ge30KICAgICAgICAgICAgcGFyYW1zLmludGVydmFsX3N0YXJ0ID0gdGhpcy5ub2RlRm9ybS5pbnRlcnZhbF9zdGFydAogICAgICAgICAgICBwYXJhbXMuaW50ZXJ2YWxfZW5kID0gdGhpcy5ub2RlRm9ybS5pbnRlcnZhbF9lbmQKICAgICAgICAgICAgcGFyYW1zLnpvbmUgPSB0aGlzLm5vZGVGb3JtLnpvbmUKICAgICAgICAgICAgcGFyYW1zLnNtdF9pZCA9IHRoaXMuc210aWQKICAgICAgICAgICAgcGFyYW1zLnNtdF9maWVsZCA9IHRoaXMubm9kZUZvcm0uc210X2ZpZWxkCiAgICAgICAgICAgIHVwZGF0ZUZpZWxkKHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlcy5yZXRjb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsgdHlwZTogJ3N1Y2Nlc3MnLCBtZXNzYWdlOiAn5L+u5pS56Ziy5Yy65oiQ5Yqf77yBJyB9KQogICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZUZvcm0uc3RhdHVzID0gMQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldEJsb2NrJywgdGhpcy5ub2RlRm9ybSkKICAgICAgICAgICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7IHR5cGU6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+S/ruaUuemYsuWMuuWksei0pe+8gScgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLm5vZGVGb3JtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmJsb2NrKSkKICAgICAgICAKICAgICAgICBpZiAodGhpcy5ub2RlRm9ybS5zdGF0dXMgIT0gMCAmJiB0aGlzLm5vZGVGb3JtLnN0YXR1cyAhPSAxKSB7CiAgICAgICAgICAgIHRoaXMubm9kZUZvcm0uc3RhdHVzID0gMAogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgfQogICAgICAgIHRoaXMuJHJlZnMubm9kZUZvcm0ucmVzZXRGaWVsZHMoKQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMubm9kZUZvcm0pCiAgICB9Cn0K"},{"version":3,"sources":["node.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"node.vue","sourceRoot":"src/views/pages/devices","sourcesContent":["<template>\n    <div>   \n        <el-form ref=\"nodeForm\" :model=\"nodeForm\" :rules=\"nodeRules\" class=\"form-container\">\n            <div class=\"createPost-main-container\">\n            <el-row>\n                <el-col :span=\"24\" class=\"form-wrapper\">\n                <div class=\"postInfo-container fit-padding\">\n                    <el-row style=\"white-space: nowrap;overflow: auto;\">\n                    <el-col :lg=\"6\" :md=\"8\">\n                        <el-form-item label-width=\"100px\" label=\"节点顺序:\" class=\"postInfo-container-item\" prop=\"order\">\n                        <el-input v-model=\"nodeForm.order\" clearable placeholder=\"请输入节点顺序\" :disabled=\"showFlag === pageType.detail || nodeForm.status === 1\"></el-input>\n                        </el-form-item>\n                    </el-col>\n\n                    <el-col :lg=\"7\" :md=\"8\">\n                        <el-form-item label-width=\"100px\" label=\"经度:\" class=\"postInfo-container-item\" prop=\"longitude\">\n                        <el-input v-model=\"nodeForm.longitude\" clearable :disabled=\"showFlag === pageType.detail || nodeForm.status === 1\" placeholder=\"请输入经度\"></el-input>\n                        </el-form-item>\n                    </el-col>\n\n                    <el-col :lg=\"7\" :md=\"8\">\n                        <el-form-item label-width=\"100px\" label=\"纬度:\" class=\"postInfo-container-item\" prop=\"latitude\">\n                        <el-input v-model=\"nodeForm.latitude\" clearable :disabled=\"showFlag === pageType.detail || nodeForm.status === 1\" placeholder=\"请输入纬度\"></el-input>\n                        </el-form-item>\n                    </el-col>\n\n                    <el-col :lg=\"4\" :md=\"8\" style=\"min-height: 1px;padding: 0 20px;\">\n                        <el-button @click=\"handleConfirm\" v-show=\"nodeForm.status === 0\" style=\"margin-left: 10px;\">确认</el-button>\n                        <span></span>\n                        <el-button @click=\"handleUpdate\" v-show=\"nodeForm.status === 1\" style=\"margin-left: 10px;\">修改</el-button>\n                        <el-button @click=\"handleDel\">删除</el-button>\n                    </el-col>\n                    </el-row>\n                </div>\n                </el-col>\n            </el-row>\n            </div>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport { createField, updateField } from '@/api/device/device.js'\nexport default {\n    data() {\n        return {\n            nodeForm: {\n                order: '',\n                longitude: '',\n                latitude: '',\n                status: ''\n            },\n            nodeRules: {\n                order: [{ required: true, message: '请输入节点顺序', trigger: 'blur' }],\n                longitude: [{ required: true, message: '请输入经度', trigger: 'blur' }],\n                latitude: [{ required: true, message: '请输入纬度', trigger: 'blur' }],\n            },\n            pageType: {\n                list: 0,\n                add: 1,\n                edit: 2,\n                detail: 3\n            },\n        }\n    },\n    props: {\n        showFlag: {\n            type: Number\n        },\n        block: {\n            type: Object\n        },\n        smtid: {\n            type: String\n        },\n    },\n    methods: {\n        handleDel() {\n            let val = this.nodeForm.id || ''\n            this.$confirm('节点删除后无法恢复，是否继续删除？', '提示', {\n                confirmButtonText: '提交',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                this.$emit('del', val)\n            }).catch((err) => {\n                console.log(err)\n            })\n        },\n        handleConfirm() {\n            let validTemp\n            this.$refs['nodeForm'].validate((valid) => {\n                if (valid) {\n                validTemp = true\n                } else {\n                validTemp = false\n                return false;\n                }\n            });\n            if (!validTemp) return \n            this.nodeForm.status = 1\n            this.$emit('getNode', this.nodeForm)\n            this.$forceUpdate()\n        },\n        handleUpdate() {\n            this.nodeForm.status = 0\n            this.$forceUpdate()\n        },\n        addField() {\n            console.log('add', this.smtid)\n            let params = {}\n            params.interval_start = this.nodeForm.interval_start\n            params.interval_end = this.nodeForm.interval_end\n            params.zone = this.nodeForm.zone\n            params.smt_id = this.smtid\n            params.smt_field = this.nodeForm.smt_field\n            createField(params).then(res => {\n                if (res.retcode === 200) {\n                    this.$message({ type: 'success', message: '新增防区成功！' })\n                    this.nodeForm.status = 1\n                    this.$emit('getBlock', this.nodeForm)\n                    this.$forceUpdate()\n                } else{\n                    this.$message({ type: 'warning', message: '新增防区失败，请输入防区号唯一！' })\n                }\n            })\n        },\n        updateField() {\n            console.log('update', this.smtid)\n            let params = {}\n            params.interval_start = this.nodeForm.interval_start\n            params.interval_end = this.nodeForm.interval_end\n            params.zone = this.nodeForm.zone\n            params.smt_id = this.smtid\n            params.smt_field = this.nodeForm.smt_field\n            updateField(params).then(res => {\n                if (res.retcode === 200) {\n                    this.$message({ type: 'success', message: '修改防区成功！' })\n                    this.nodeForm.status = 1\n                    this.$emit('getBlock', this.nodeForm)\n                    this.$forceUpdate()\n                } else{\n                    this.$message({ type: 'warning', message: '修改防区失败！' })\n                }\n            })\n        }\n    },\n    mounted() {\n        this.nodeForm = JSON.parse(JSON.stringify(this.block))\n        \n        if (this.nodeForm.status != 0 && this.nodeForm.status != 1) {\n            this.nodeForm.status = 0\n            this.$forceUpdate()\n        }\n        this.$refs.nodeForm.resetFields()\n        console.log(this.nodeForm)\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .form-container {\n    // margin-left: 40px;\n    // margin-right: 10px;\n    margin-top: 30px;\n    margin-bottom: 20px;\n  }\n\n  .formBar {\n    border-bottom: 1px solid #dfe6ec;\n    overflow: hidden;\n\n    .filter-item {\n      margin-bottom: 0;\n    }\n\n    .form-head {\n      font-size: 20px;\n      margin-top: 10px;\n      margin-left: 6px;\n      color: #666;\n      display: inline-block;\n    }\n  }\n\n  .postInfo-container-item {\n    min-width: 250px;\n  }\n\n  .form-wrapper {\n    border: 1px solid #dfe6ec;\n    padding-top: 30px;\n    border-radius: 5px;\n  }\n\n  .md-input {\n    margin-bottom: 20px;\n    margin-top: -40px;\n    margin-left: 15px;\n  }\n\n  .fit-padding {\n    padding-left: 10px;\n  }\n</style>"]}]}