(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a2fddb0"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),Math.easeInOutQuad=function(e,t,a,s){return e/=s/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,a){var o=n(),l=e-o,r=20,c=0;t="undefined"===typeof t?500:t;var p=function e(){c+=r;var n=Math.easeInOutQuad(c,o,l,t);i(n),c<t?s(e):a&&"function"===typeof a&&a()};p()}},5044:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a("b775");function i(){return Object(s["a"])({url:"/qiniu/upload/token",method:"get"})}},6724:function(e,t,a){"use strict";a("8d41");var s="@@wavesContext";function i(e,t){function a(a){var s=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},s),n=i.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var o=n.getBoundingClientRect(),l=n.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(o.width,o.height)+"px",n.appendChild(l)),i.type){case"center":l.style.top=o.height/2-l.offsetHeight/2+"px",l.style.left=o.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(a.pageY-o.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(a.pageX-o.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=i.color,l.className="waves-ripple z-active",!1}}return e[s]?e[s].removeHandle=a:e[s]={removeHandle:a},a}var n={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[s].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[s].removeHandle,!1),e[s]=null,delete e[s]}},o=function(e){e.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(o)),n.install=o;t["a"]=n},"8d41":function(e,t,a){},"9af0":function(e,t,a){"use strict";var s=a("d133"),i=a.n(s);i.a},c204:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.showFlag===e.pageType.list?a("div",[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px",float:"right","margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v(" "+e._s(e.$t("table.add"))+" ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" "+e._s(e.$t("table.search"))+" ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"80"}}),a("el-table-column",{attrs:{label:"用户姓名",width:"200px",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"用户账号","min-width":"200px",align:"center",prop:"user"}}),a("el-table-column",{attrs:{label:"用户密码","min-width":"200px",align:"center",prop:"password"}}),a("el-table-column",{attrs:{label:"权限等级",width:"200px",align:"center",prop:"level"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("span",[e._v(e._s(3===s.level?"系统管理员":2===s.level?"高级管理员":"初级管理员"))])]}}],null,!1,2589117822)}),a("el-table-column",{attrs:{label:"联系方式","min-width":"200px",align:"center",prop:"phone"}}),a("el-table-column",{attrs:{fixed:"right",label:e.$t("table.actions"),align:"center",width:"250","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row,i=t.$index;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdate(s)}}},[e._v(" "+e._s(e.$t("table.edit"))+" ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleDetail(s)}}},[e._v(" 详情 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(s,i)}}},[e._v(" "+e._s(e.$t("table.delete"))+" ")])]}}],null,!1,1007551280)})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryForm.page,limit:e.queryForm.limit},on:{"update:page":function(t){return e.$set(e.queryForm,"page",t)},"update:limit":function(t){return e.$set(e.queryForm,"limit",t)},pagination:e.getList}})],1):e.showFlag===e.pageType.add||e.showFlag===e.pageType.edit||e.showFlag===e.pageType.detail?a("div",[a("div",{staticClass:"filter-container formBar"},[a("div",{staticClass:"form-head"},[e._v(" "+e._s(e.headName)+" ")]),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px",float:"right","margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-back"},on:{click:e.handleReturn}},[e._v(" 返回 ")]),e.showFlag!==e.pageType.detail?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px",float:"right"},attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.handleReset}},[e._v(" 重置 ")]):e._e(),e.showFlag!==e.pageType.detail?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-document-checked"},on:{click:e.handleSubmit}},[e._v(" 提交 ")]):e._e()],1),a("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.postForm,rules:e.postRules}},[a("div",{staticClass:"createPost-main-container"},[a("el-row",[a("el-col",{staticClass:"form-wrapper",attrs:{span:24}},[a("el-row",{staticClass:"fit-padding"},[a("el-col",{attrs:{span:18}},[a("el-form-item",{staticClass:"md-input",attrs:{prop:"user"}},[a("MDinput",{attrs:{maxlength:100,name:"user",required:"",disabled:e.showFlag!==e.pageType.add},model:{value:e.postForm.user,callback:function(t){e.$set(e.postForm,"user",t)},expression:"postForm.user"}},[e._v(" "+e._s(e.mdcontent)+" ")])],1)],1),a("el-col",{attrs:{span:6}})],1),a("div",{staticClass:"postInfo-container fit-padding"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"90px",label:"用户名称:",prop:"name"}},[a("el-input",{staticStyle:{"min-width":"120px"},attrs:{clearable:"",disabled:e.showFlag===e.pageType.detail},model:{value:e.postForm.name,callback:function(t){e.$set(e.postForm,"name",t)},expression:"postForm.name"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"用户密码:",prop:"password"}},[a("el-input",{attrs:{disabled:e.showFlag===e.pageType.detail,clearable:""},model:{value:e.postForm.password,callback:function(t){e.$set(e.postForm,"password",t)},expression:"postForm.password"}})],1)],1),a("el-col",{staticStyle:{"min-height":"1px"},attrs:{span:6}})],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"90px",label:"联系方式:",prop:"phone"}},[a("el-input",{attrs:{disabled:e.showFlag===e.pageType.detail,clearable:""},model:{value:e.postForm.phone,callback:function(t){e.$set(e.postForm,"phone",t)},expression:"postForm.phone"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"权限等级:",prop:"level"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","default-first-option":"",placeholder:"请选择权限等级",disabled:e.showFlag===e.pageType.detail},model:{value:e.postForm.level,callback:function(t){e.$set(e.postForm,"level",t)},expression:"postForm.level"}},e._l(e.levelList,(function(e,t){return a("el-option",{key:e.id+t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-col",{staticStyle:{"min-height":"1px"},attrs:{span:6}})],1)],1)],1)],1)],1)])],1):e._e()])},i=[],n=(a("4160"),a("b64b"),a("159b"),a("b775"));function o(e){return Object(n["a"])({url:"/api/v1/user_add/",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/api/v1/user_list/",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/api/v1/user_set/",method:"put",params:e})}function c(e){return Object(n["a"])({url:"/api/v1/user_delete/",method:"delete",params:e})}var p=a("6724"),u=(a("ed08"),a("333d")),d=a("8256"),m=(a("70a2"),a("1aba")),h=(a("bc3a"),{name:"ComplexTable",components:{Tinymce:d["a"],MDinput:m["a"],Pagination:u["a"]},directives:{waves:p["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]},typeFilter:function(e){return calendarTypeKeyValue[e]}},data:function(){return{tableKey:0,list:null,total:0,listLoading:!0,postRules:{user:[{required:!0,message:"请输入用户账号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],level:[{required:!0,message:"请选择权限等级",trigger:"change"}]},showFlag:0,pageType:{list:0,add:1,edit:2,detail:3},queryForm:{page:1,limit:15},postForm:{name:"",level:"",user:"",password:"",phone:""},levelList:[{id:1,name:"初级管理员"},{id:2,name:"高级管理员"},{id:3,name:"系统管理员"}],currentRow:{}}},created:function(){this.getList()},computed:{mdcontent:function(){var e=""==this.postForm.area_id?"请输入用户账号:":"用户账号:";return e},headName:function(){var e=this.showFlag===this.pageType.add?"新增管理员":this.showFlag===this.pageType.edit?"编辑管理员":"管理员详情";return e}},methods:{getList:function(){var e=this;this.listLoading=!0,l(this.queryForm).then((function(t){200==t.retcode&&(e.list=t.result,e.list&&e.list.length>0&&(e.total=e.list.length)),setTimeout((function(){e.listLoading=!1}),1e3)}))},handleFilter:function(){this.getList()},handleCreate:function(){this.showFlag=this.pageType.add,this.currentRow={},this.handleReset()},handleReturn:function(){this.showFlag=this.pageType.list},handleReset:function(){var e=this;Object.keys(this.postForm).forEach((function(t){e.postForm[t]=e.currentRow[t]})),this.$nextTick((function(){e.$refs.postForm.resetFields()}))},handleSubmit:function(){var e,t=this;this.$refs["postForm"].validate((function(t){if(!t)return console.log("error submit!!"),e=!1,!1;e=!0})),e&&(this.showFlag===this.pageType.add?o(this.postForm).then((function(e){200!==e.retcode&&"success"!==e.status||(t.$message({type:"success",message:"提交成功！"}),setTimeout((function(){t.showFlag=t.pageType.list,t.getList()}),500))})):this.showFlag===this.pageType.edit&&r(this.postForm).then((function(e){200!==e.retcode&&"success"!==e.status||(t.$message({type:"success",message:"提交成功！"}),setTimeout((function(){t.showFlag=t.pageType.list,t.getList()}),500))})))},handleUpdate:function(e){var t=this;this.showFlag=this.pageType.edit,this.currentRow=e,Object.keys(this.postForm).forEach((function(a){t.postForm[a]=e[a]}))},handleDetail:function(e){var t=this;this.showFlag=this.pageType.detail,Object.keys(this.postForm).forEach((function(a){t.postForm[a]=e[a]}))},handleDelete:function(e){var t=this,a={};a.user=e.user,this.$confirm("用户删除后将不可恢复，确认删除该用户？","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){c(a).then((function(e){200===e.retcode?(t.$message({type:"success",message:"删除成功！"}),setTimeout((function(){t.getList()}),200)):t.$message({type:"warning",message:"删除失败！".concat(e.status)})}))})).catch((function(e){console.log(e)}))}}}),f=h,g=(a("9af0"),a("2877")),v=Object(g["a"])(f,s,i,!1,null,"9f3b0c72",null);t["default"]=v.exports},d133:function(e,t,a){}}]);