(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ec068aa"],{"192c":function(t,o,e){"use strict";var s=e("6e31"),n=e.n(s);n.a},"1fe2":function(t,o,e){"use strict";var s=e("71567"),n=e.n(s);n.a},2017:function(t,o,e){"use strict";var s=e("cafe"),n=e.n(s);n.a},"6e31":function(t,o,e){},71567:function(t,o,e){},"81d5":function(t,o,e){"use strict";var s=e("7b0b"),n=e("23cb"),r=e("50c4");t.exports=function(t){var o=s(this),e=r(o.length),a=arguments.length,i=n(a>1?arguments[1]:void 0,e),c=a>2?arguments[2]:void 0,l=void 0===c?e:n(c,e);while(l>i)o[i++]=t;return o}},"9ed6":function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"login-container"},[e("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,autocomplete:"on","label-position":"left"}},[e("div",{staticClass:"title-container"},[e("h3",{staticClass:"title"},[t._v(" "+t._s(t.$t("login.title"))+" ")])]),e("el-form-item",{attrs:{prop:"account"}},[e("span",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"user"}})],1),e("el-input",{ref:"account",attrs:{placeholder:"账号/手机号",name:"account",type:"text",tabindex:"1",autocomplete:"on"},model:{value:t.loginForm.account,callback:function(o){t.$set(t.loginForm,"account",o)},expression:"loginForm.account"}})],1),e("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:t.capsTooltip,callback:function(o){t.capsTooltip=o},expression:"capsTooltip"}},[e("el-form-item",{attrs:{prop:"password"}},[e("span",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"password"}})],1),e("el-input",{key:t.passwordType,ref:"password",attrs:{type:t.passwordType,placeholder:t.$t("login.password"),name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(o){t.capsTooltip=!1}},nativeOn:{keyup:function(o){return t.checkCapslock(o)}},model:{value:t.loginForm.password,callback:function(o){t.$set(t.loginForm,"password",o)},expression:"loginForm.password"}}),e("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[e("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)],1)],1),e("el-button",{staticStyle:{width:"32%","margin-bottom":"30px"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(o){return o.preventDefault(),t.handleLogin(o)}}},[t._v(" "+t._s(t.$t("login.logIn"))+" ")]),e("el-button",{staticStyle:{width:"32%","margin-bottom":"30px"},nativeOn:{click:function(o){return o.preventDefault(),t.resetForm(o)}}},[t._v(" 重置 ")]),e("el-button",{staticStyle:{width:"31%","margin-bottom":"30px"},on:{click:t.forgetPasswordFun}},[t._v(" 忘记密码 ")])],1),e("el-dialog",{attrs:{"before-close":t.forgetPasswordClose,width:"600px",title:"忘记密码","close-on-click-modal":!1,visible:t.forgetPasswordVisible},on:{"update:visible":function(o){t.forgetPasswordVisible=o}}},[e("el-form",{ref:"forgetPasswordForm",attrs:{model:t.forgetPasswordForm,rules:t.forgetPasswordRules}},[e("el-form-item",{attrs:{prop:"account"}},[e("span",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"user"}})],1),e("el-input",{ref:"account",attrs:{placeholder:"账号/手机号",name:"account",type:"text",tabindex:"1",autocomplete:"on"},model:{value:t.forgetPasswordForm.account,callback:function(o){t.$set(t.forgetPasswordForm,"account",o)},expression:"forgetPasswordForm.account"}})],1),e("el-form-item",{attrs:{prop:"phone"}},[e("span",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"example"}})],1),e("el-input",{ref:"phone",attrs:{placeholder:"手机号",name:"phone",type:"text",tabindex:"6",autocomplete:"on"},model:{value:t.forgetPasswordForm.phone,callback:function(o){t.$set(t.forgetPasswordForm,"phone",o)},expression:"forgetPasswordForm.phone"}})],1),e("el-form-item",{attrs:{prop:"phone_auth_code"}},[e("span",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"component"}})],1),e("el-input",{ref:"phone_auth_code",attrs:{placeholder:"验证码",name:"phone_auth_code",type:"text",tabindex:"4",width:"width: calc(85% - 210px)",autocomplete:"on"},model:{value:t.forgetPasswordForm.phone_auth_code,callback:function(o){t.$set(t.forgetPasswordForm,"phone_auth_code",o)},expression:"forgetPasswordForm.phone_auth_code"}}),e("span",{staticClass:"yzmDjsMsg_class",on:{click:function(o){return t.getCode("forgetPasswordForm")}}},[t._v(" "+t._s(t.yzmDjsMsg)+" ")])],1),e("el-form-item",{attrs:{prop:"password"}},[e("span",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"password"}})],1),e("el-input",{key:t.passwordType,ref:"password",attrs:{type:t.passwordType,placeholder:"新密码",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(o){t.capsTooltip=!1}},nativeOn:{keyup:function(o){return t.checkCapslock(o)}},model:{value:t.forgetPasswordForm.password,callback:function(o){t.$set(t.forgetPasswordForm,"password",o)},expression:"forgetPasswordForm.password"}}),e("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[e("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)],1),e("el-form-item",{attrs:{prop:"surePassword"}},[e("span",{staticClass:"svg-container"},[e("svg-icon",{attrs:{"icon-class":"password"}})],1),e("el-input",{key:t.passwordType,ref:"surePassword",attrs:{type:t.passwordType,placeholder:"确认密码",name:"surePassword",tabindex:"2",autocomplete:"on"},on:{blur:function(o){t.capsTooltip=!1}},nativeOn:{keyup:function(o){return t.checkCapslock(o)}},model:{value:t.forgetPasswordForm.surePassword,callback:function(o){t.$set(t.forgetPasswordForm,"surePassword",o)},expression:"forgetPasswordForm.surePassword"}}),e("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[e("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{nativeOn:{click:function(o){return o.preventDefault(),t.forgetPasswordClose(o)}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(o){return o.preventDefault(),t.forgetPasswordLogin(o)}}},[t._v("提 交")])],1)],1),e("el-dialog",{attrs:{title:t.$t("login.thirdparty"),visible:t.showDialog},on:{"update:visible":function(o){t.showDialog=o}}},[t._v(" "+t._s(t.$t("login.thirdpartyTips"))+" "),e("br"),e("br"),e("br"),e("social-sign")],1)],1)},n=[],r=(e("13d5"),e("b64b"),function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"s-canvas"},[e("canvas",{attrs:{id:"s-canvas",width:t.contentWidth,height:t.contentHeight}})])}),a=[],i=(e("cb29"),{name:"SIdentify",props:{identifyCode:{type:String,default:"3795"}},data:function(){return{fontSizeMin:30,fontSizeMax:30,backgroundColorMin:180,backgroundColorMax:240,colorMin:50,colorMax:160,lineColorMin:10,lineColorMax:10,dotColorMin:0,dotColorMax:255,contentWidth:110,contentHeight:50}},methods:{randomNum:function(t,o){return Math.floor(Math.random()*(o-t)+t)},randomColor:function(t,o){var e=this.randomNum(t,o),s=this.randomNum(t,o),n=this.randomNum(t,o);return"rgb("+e+","+s+","+n+")"},drawPic:function(){var t=document.getElementById("s-canvas"),o=t.getContext("2d");o.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),o.strokeStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),o.fillRect(0,0,this.contentWidth,this.contentHeight),o.strokeRect(0,0,this.contentWidth,this.contentHeight);for(var e=0;e<this.identifyCode.length;e++)this.drawText(o,this.identifyCode[e],e);this.drawLine(o),this.drawDot(o)},drawText:function(t,o,e){t.fillStyle=this.randomColor(this.colorMin,this.colorMax),t.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei",t.textBaseline="alphabetic";var s=(e+1)*(this.contentWidth/(this.identifyCode.length+1)),n=this.randomNum(this.fontSizeMax,this.contentHeight-5),r=this.randomNum(-45,45);t.translate(s,n),t.rotate(r*Math.PI/180),t.fillText(o,0,0),t.rotate(-r*Math.PI/180),t.translate(-s,-n)},drawLine:function(t){},drawDot:function(t){for(var o=0;o<100;o++)t.fillStyle=this.randomColor(0,255),t.beginPath(),t.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),t.fill()}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}}),c=i,l=(e("1fe2"),e("2877")),d=Object(l["a"])(c,r,a,!1,null,"9ac6f3c8",null),u=d.exports,f=e("61f7"),p=e("1131"),h=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"social-signup-container"},[e("div",{staticClass:"sign-btn",on:{click:function(o){return t.wechatHandleClick("wechat")}}},[e("span",{staticClass:"wx-svg-container"},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"wechat"}})],1),t._v(" WeChat ")]),e("div",{staticClass:"sign-btn",on:{click:function(o){return t.tencentHandleClick("tencent")}}},[e("span",{staticClass:"qq-svg-container"},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"qq"}})],1),t._v(" QQ ")])])},g=[],m={name:"SocialSignin",methods:{wechatHandleClick:function(t){alert("ok")},tencentHandleClick:function(t){alert("ok")}}},w=m,v=(e("d9fb"),Object(l["a"])(w,h,g,!1,null,"7309fbbb",null)),b=v.exports,y=e("abfb"),C={name:"Login",components:{LangSelect:p["a"],SocialSign:b,"v-sidentify":u},data:function(){var t=function(t,o,e){Object(f["d"])(o)?e():e(new Error("请输入账号/手机号"))},o=function(t,o,e){Object(f["d"])(o)?e():e(new Error("请输入手机号"))},e=function(t,o,e){o.length<6?e(new Error("请输入密码")):e()};return{forgetPasswordForm:{account:"",password:"",surePassword:"",phone:"",phone_auth_code:""},loginForm:{account:"",password:"",pCode:"",phone:"12345678901",phone_auth_code:"123456"},loginRules:{account:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:e}]},forgetPasswordRules:{account:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:e}],phone:[{required:!0,trigger:"blur",validator:o}],surePassword:[{required:!0,trigger:"blur",validator:e}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{},forgetPasswordVisible:!1,identifyCode:"",identifyCodes:"1234567890",yzmDjsMsg:"获取验证码",timer:{},disabled:!1}},watch:{$route:{handler:function(t){var o=t.query;o&&(this.redirect=o.redirect,this.otherQuery=this.getOtherQuery(o))},immediate:!0}},created:function(){this.refreshCode()},mounted:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4),""===this.loginForm.account?this.$refs.account.focus():""===this.loginForm.password&&this.$refs.password.focus()},destroyed:function(){},methods:{randomNum:function(t,o){return Math.floor(Math.random()*(o-t)+t)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(t,o){for(var e=0;e<o;e++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]},forgetPasswordLogin:function(){var t=this;if(this.forgetPasswordForm.surePassword!=this.forgetPasswordForm.password)return this.$message({message:"两次密码不一样",type:"warning"}),void this.$refs.surePassword.focus();this.forgetPasswordForm.new_pwd=this.forgetPasswordForm.password,Object(y["b"])(this.forgetPasswordForm).then((function(o){200==o.data.retcode&&(t.$message({type:"success",message:"密码修改成功！"}),t.forgetPasswordClose())}))},forgetPasswordClose:function(){this.yzmDjsMsg="获取验证码",this.disabled=!1,clearInterval(this.timer),this.forgetPasswordVisible=!1},forgetPasswordFun:function(){clearInterval(this.timer),this.yzmDjsMsg="获取验证码",this.disabled=!1,this.forgetPasswordVisible=!0},resetImg:function(){this.refreshCode()},tackBtn:function(t){var o=this;Object(y["a"])(t).then((function(t){if(console.log(t),200!=t.data.retcode)return o.disabled=!1,void o.$message.error(t.data.error);var e=60;o.timer=setInterval((function(){0==e?(clearInterval(o.timer),o.yzmDjsMsg="获取验证码",o.disabled=!1):(o.disabled=!0,o.yzmDjsMsg=e+"秒后重试",e--)}),1e3),console.log(t)}))},getCode:function(t){var o=this;if(!this.disabled){this.$refs[t].validateField("phone",(function(t){if(t)return o.$message({message:"请输入正确的账号/手机号",type:"warning"}),void o.$refs.phone.focus()}))}},checkCapslock:function(t){var o=t.key;this.capsTooltip=o&&1===o.length&&o>="A"&&o<="Z"},showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},resetForm:function(){this.$refs.loginForm.resetFields()},handleLogin:function(){var t=this;console.log("000"),console.log(this.loginForm);var o=this;this.$refs.loginForm.validate((function(e){if(console.log("111"),!e)return console.log("error submit!!"),!1;console.log("222"),t.loading=!0,t.$store.dispatch("user/login",o.loginForm).then((function(){console.log("333"),t.$router.push({path:t.redirect||"/",query:t.otherQuery}),t.loading=!1})).catch((function(o){console.log("444",o),t.loading=!1}))}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(o,e){return"redirect"!==e&&(o[e]=t[e]),o}),{})}}},P=C,k=(e("2017"),e("192c"),Object(l["a"])(P,s,n,!1,null,"11527673",null));o["default"]=k.exports},a9b3:function(t,o,e){},cafe:function(t,o,e){},cb29:function(t,o,e){var s=e("23e7"),n=e("81d5"),r=e("44d2");s({target:"Array",proto:!0},{fill:n}),r("fill")},d9fb:function(t,o,e){"use strict";var s=e("a9b3"),n=e.n(s);n.a}}]);